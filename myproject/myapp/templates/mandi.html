<!doctype html>
<html lang="en">
  <head>
    <title>Title</title>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
  </head>
  <body>
      
<div class="container form-group shadow-lg">
  
 
    <label for="commodity ">Commodity</label>
    <select class="custom-select" aria-label="Default select example" id="commodity" onchange="commodityfield()">
      <option selected>Select Commodity</option>
      {% for i in commodity%}
      <option value="{{i.id}}"{% if request.get.commodity == i.id|lower %}
      selected {% endif %}>
      {{i.name}}
        </option>
        {% endfor %}
      </select>
    </br>
        
          <label for="state">State</label>
          <select class="custom-select" aria-label="Default select example" id="state" onchange="statefield()">
            <option selected>Select State</option>
            {% for i in state %}
            <option value="{{i.id}}" {% if request.GET.state == i.id|lower %}
            selected {%endif%}>{{i.name}}</option>
            {% endfor %}
            
          </select>
        </br>

          
            <label for="market">Market</label>
            <select class="custom-select" name="" id="market" onchange="datafield()">
              <option selected>Market</option>
              {% for i in market %}
              <option value="{{i.id}}" {% if request.GET.market == i.id|lower %} selected {% endif %}>
                {{i.name}}</option>
              {% endfor %}
              
            </select>
          
            <div>
              

              {% comment %} <label for="market">more data</label>
              <select class="custom-select" name="" id="commodityData">
                <option selected>Data</option>
                {% for i in commodityData %}
                <option value="{{i.id}}">
                  {{i.name}}</option>
                <option value="{{i.id}}">
                  {{i.avgPrice}}</option>
                {% endfor %} {% endcomment %}
                

                <div class="row">
                  {% for i in commodityData %}
                  <div class="col-4">
                      <div class="item" data-id="{{i.id}}">
                          <h3>{{i.name}}</h3>
                          <p>Average Price: {{i.avgPrice}}</p>
                          <p>Min Price: {{i.minPrice}}</p>
                          <p>Max Price: {{i.maxPrice}}</p>
                          <p>Price Updated: {{i.priceUpdated}}</p>
                          <p>Previous Price: {{i.prevprice}}</p>
                      </div>
                  </div>
                  {% endfor %}
                </div>



               
<table class="table table-striped table-inverse ">
  <thead class="thead-inverse">
    <tr>
      <th>Commodity</th>
      <th>Market</th>
      <th>Average Price</th>
      <th>Min Price</th>
      <th>Price Updated</th>
      <th>Previous Price</th>
    </tr>
    </thead>
    <tbody >
      {% for i in allData %}
      <div class="item" data-id="{{i.id}}">
      <tr>
        <td scope="row">{{i.name}}</td>
        <td scope="row">{{i.location}}</td>
        <td>{{i.avgPrice}}</td>
        <td>{{i.minPrice}}</td>
        <td>{{i.priceUpdated}}</td>
        <td>{{i.prevprice}}</td>
      </tr>
    </div>
    {% endfor %}
    </tbody>
</table>













    

<script>
  function commodityfield(){
    commodityid = document.getElementById('commodity').value;
    window.location = "/?commodity="+commodityid;
  }

  function statefield(){
    stateid = document.getElementById('state').value;
    window.location = "/?commodity="+'{{request.GET.commodity}}'+"&state="+stateid;
  }

  function datafield() {
    const marketId = document.getElementById('market').value;
    window.location = `/?commodity={{ request.GET.commodity }}&state={{ request.GET.state }}&market=${marketId}`;
}
</script>



















    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
  </body>
</html>